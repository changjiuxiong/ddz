(function(e){function t(t){for(var i,o,a=t[0],l=t[1],h=t[2],p=0,g=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&g.push(n[o][0]),n[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(g.length)g.shift()();return s.push.apply(s,h||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],i=!0,a=1;a<r.length;a++){var l=r[a];0!==n[l]&&(i=!1)}i&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var i={},n={app:0},s=[];function o(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=i,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(r,i,function(t){return e[t]}.bind(null,i));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var h=0;h<a.length;h++)t(a[h]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"00a8":function(e,t,r){e.exports=r.p+"img/scene.02780059.jpg"},"4cee":function(e,t,r){"use strict";var i=r("9384"),n=r.n(i);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("a133"),r("ed0d"),r("f09c"),r("e117");var i=r("a593"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Game")],1)},s=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"user-select":"none",position:"fixed",left:"0",right:"0",top:"0",bottom:"0","background-repeat":"no-repeat","background-size":"cover"},style:{backgroundImage:"url("+r("00a8")+")"}},[e._m(0),"play"===e.game.stage?i("div",{staticStyle:{position:"fixed",top:"10px",width:"100%",height:"100px"},style:{marginLeft:e.dizhuPokerMarginLeft+"px"}},[i("div",{staticStyle:{color:"red"}},[e._v(" 地主牌 ")]),e._l(e.game.dizhuPokerList,(function(t){return i("div",{staticClass:"pokerDizhu",class:{s:16===t.number,x:17===t.number}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.number<16,expression:"item.number<16"}]},[e._v(" "+e._s(t.text)+" ")])])}))],2):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:"ready"===e.game.stage,expression:"game.stage==='ready'"}],staticStyle:{"font-size":"20px",color:"white",position:"fixed",bottom:"200px","z-index":"999"},style:{marginLeft:e.playerMarginLeft-40+"px"}},[i("button",{directives:[{name:"show",rawName:"v-show",value:!e.game.playerList[0].ready,expression:"!game.playerList[0].ready"}],staticStyle:{"font-size":"40px",height:"60px","line-height":"30px","border-radius":"4px","background-color":"lawngreen"},on:{mousedown:e.setReady}},[e._v(e._s(e.game.playerList[0].ready?"已准备":"准备"))]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.game.playerList[0].ready,expression:"game.playerList[0].ready"}],staticStyle:{color:"red",width:"80px",border:"solid","border-radius":"4px",position:"absolute"}},[e._v(" "+e._s(e.game.playerList[0].ready?"已准备":"未准备")+" ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"jiaoFen"===e.game.stage&&e.game.currentJiaoFenPlayer===e.game.playerList[0],expression:"game.stage==='jiaoFen'&&game.currentJiaoFenPlayer===game.playerList[0]"}],staticStyle:{"font-size":"20px",color:"white",position:"fixed",bottom:"200px","z-index":"999"},style:{marginLeft:e.playerMarginLeft-40+"px"}},[i("button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticStyle:{"font-size":"40px",height:"60px","line-height":"30px","border-radius":"4px","background-color":"lawngreen"},on:{mousedown:function(t){return e.game.playerList[0].setJiaoFen(0)}}},[e._v("不叫")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticStyle:{"font-size":"40px",height:"60px","line-height":"30px","border-radius":"4px","background-color":"lawngreen"},on:{mousedown:function(t){return e.game.playerList[0].setJiaoFen(1)}}},[e._v("1分")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticStyle:{"font-size":"40px",height:"60px","line-height":"30px","border-radius":"4px","background-color":"lawngreen"},on:{mousedown:function(t){return e.game.playerList[0].setJiaoFen(2)}}},[e._v("2分")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticStyle:{"font-size":"40px",height:"60px","line-height":"30px","border-radius":"4px","background-color":"lawngreen"},on:{mousedown:function(t){return e.game.playerList[0].setJiaoFen(3)}}},[e._v("3分")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"play"===e.game.stage,expression:"game.stage==='play'"}],staticStyle:{color:"white",position:"fixed",bottom:"0",width:"100%",height:"200px","line-height":"200px"},style:{marginLeft:e.playerMarginLeft-150+"px"}},[e._v(" 你是 "),i("span",{staticStyle:{color:"red","font-size":"20px"}},[e._v(e._s("nongmin"===e.game.playerList[0].type?"农民":"地主"))])]),i("div",{staticStyle:{position:"fixed",bottom:"0",width:"100%",height:"200px"},style:{marginLeft:e.playerMarginLeft+"px"}},e._l(e.game.playerList[0].pokerList,(function(t){return i("div",{staticClass:"poker pokerDesk",class:{selected:t.selected,s:16===t.number,x:17===t.number},on:{mouseenter:function(r){return e.enter(r,t)},mousedown:function(r){return e.pickPoker(t)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.number<16,expression:"item.number<16"}]},[e._v(" "+e._s(t.text)+" ")])])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:e.game.currentPlayer===e.game.playerList[0],expression:"game.currentPlayer===game.playerList[0]"}],staticStyle:{position:"fixed",bottom:"200px",width:"100%",height:"100px","text-align":"left"}},[i("div",{staticStyle:{width:"400px",height:"60px"},style:{marginLeft:e.buttonMarginLeft+"px"}},[i("button",{staticStyle:{height:"60px","border-radius":"4px",float:"left","font-size":"40px","background-color":"red"},on:{click:e.pass}},[e._v("不出")]),i("button",{staticStyle:{height:"60px","border-radius":"4px",float:"right","font-size":"40px","background-color":"lawngreen"},on:{click:e.sendPoker2}},[e._v("出牌")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.game.currentPlayer===e.game.playerList[0],expression:"game.currentPlayer===game.playerList[0]"}],staticStyle:{color:"red",width:"150px",border:"solid","border-radius":"4px",float:"left","margin-left":"20px"}},[e._v(" 请在"+e._s(e.game.second)+"秒内出牌 ")])])]),e.game.playerList[0].lastSendObj&&e.game.playerList[0].lastSendObj.poker[0].text?i("div",{staticStyle:{position:"fixed",bottom:"350px",width:"100%",height:"200px"},style:{marginLeft:e.deskPokerMarginLeft+"px"}},e._l(e.game.playerList[0].lastSendObj.poker,(function(t){return i("div",{staticClass:"pokerDesk",class:{s:16===t.number,x:17===t.number}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.number<16,expression:"item.number<16"}]},[e._v(" "+e._s(t.text)+" ")])])})),0):e._e(),e.game.playerList[0].lastSendObj&&!e.game.playerList[0].lastSendObj.poker[0].text?i("div",{staticStyle:{position:"fixed",bottom:"350px",width:"100%",height:"200px"},style:{marginLeft:e.deskPokerMarginLeft+"px"}},[i("div",{staticStyle:{height:"100%",width:"100px",float:"left","margin-left":"-50px","font-size":"50px",color:"#ff0000"}},[e._v(" pass ")])]):e._e(),"jiaoFen"===e.game.stage&&-1!=e.game.playerList[0].jiaoFen?i("div",{staticStyle:{position:"fixed",bottom:"350px",width:"100%",height:"200px"},style:{marginLeft:e.playerJiaoFenMargin+"px"}},[i("div",{staticStyle:{height:"100%",width:"100px",float:"left","margin-left":"-50px","font-size":"50px",color:"#ff0000"}},[0!=e.game.playerList[0].jiaoFen?i("span",[e._v(" "+e._s(e.game.playerList[0].jiaoFen)+"分 ")]):e._e(),0==e.game.playerList[0].jiaoFen?i("span",[e._v(" 不叫 ")]):e._e()])]):e._e(),i("div",{staticStyle:{position:"fixed",top:"40px",left:"20px",height:"200px",width:"100px",border:"solid 1px","border-radius":"8px","background-color":"azure","text-align":"center"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:"play"===e.game.stage,expression:"game.stage==='play'"}],staticStyle:{color:"red","font-size":"20px"}},[e._v(" "+e._s("nongmin"===e.game.playerList[2].type?"农民":"地主")+" ")]),i("p",[e._v(" "+e._s(e.game.playerList[2].name)+" ")]),i("p",[e._v(" 剩余 "+e._s(e.game.playerList[2].pokerList.length)+" 张 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.game.currentPlayer===e.game.playerList[2],expression:"game.currentPlayer===game.playerList[2]"}],staticStyle:{color:"red",width:"150px",border:"solid","border-radius":"4px",position:"absolute",bottom:"-50px",left:"0"}},[e._v(" 请在"+e._s(e.game.second)+"秒内出牌 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:"ready"===e.game.stage,expression:"game.stage==='ready'"}],staticStyle:{color:"red",width:"80px",border:"solid","border-radius":"4px",position:"absolute",bottom:"-50px",left:"0","z-index":"999"}},[e._v(" "+e._s(e.game.playerList[2].ready?"已准备":"未准备")+" ")])]),e.game.playerList[2].lastSendObj&&e.game.playerList[2].lastSendObj.poker[0].text?i("div",{staticStyle:{position:"fixed",top:"100px",left:"200px",height:"200px"}},e._l(e.game.playerList[2].lastSendObj.poker,(function(t){return i("div",{staticClass:"pokerDesk",class:{s:16===t.number,x:17===t.number}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.number<16,expression:"item.number<16"}]},[e._v(" "+e._s(t.text)+" ")])])})),0):e._e(),e.game.playerList[2].lastSendObj&&!e.game.playerList[2].lastSendObj.poker[0].text?i("div",{staticStyle:{position:"fixed",top:"100px",left:"200px",height:"200px"}},[i("div",{staticStyle:{height:"100%",width:"100px",float:"left","margin-left":"-50px","font-size":"50px",color:"#ff0000"}},[e._v(" pass ")])]):e._e(),"jiaoFen"===e.game.stage&&-1!=e.game.playerList[2].jiaoFen?i("div",{staticStyle:{position:"fixed",top:"100px",left:"200px",height:"200px"}},[i("div",{staticStyle:{height:"100%",width:"100px",float:"left","margin-left":"-50px","font-size":"50px",color:"#ff0000"}},[0!=e.game.playerList[2].jiaoFen?i("span",[e._v(" "+e._s(e.game.playerList[2].jiaoFen)+"分 ")]):e._e(),0==e.game.playerList[2].jiaoFen?i("span",[e._v(" 不叫 ")]):e._e()])]):e._e(),i("div",{staticStyle:{position:"fixed",top:"40px",right:"20px",height:"200px",width:"100px",border:"solid 1px","border-radius":"8px","background-color":"azure","text-align":"center"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:"play"===e.game.stage,expression:"game.stage==='play'"}],staticStyle:{color:"red","font-size":"20px"}},[e._v(" "+e._s("nongmin"===e.game.playerList[1].type?"农民":"地主")+" ")]),i("p",[e._v(" "+e._s(e.game.playerList[1].name)+" ")]),i("p",[e._v(" 剩余 "+e._s(e.game.playerList[1].pokerList.length)+" 张 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.game.currentPlayer===e.game.playerList[1],expression:"game.currentPlayer===game.playerList[1]"}],staticStyle:{color:"red",width:"150px",border:"solid","border-radius":"4px",position:"absolute",bottom:"-50px",right:"0"}},[e._v(" 请在"+e._s(e.game.second)+"秒内出牌 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:"ready"===e.game.stage,expression:"game.stage==='ready'"}],staticStyle:{color:"red",width:"80px",border:"solid","border-radius":"4px",position:"absolute",bottom:"-50px",right:"0","z-index":"999"}},[e._v(" "+e._s(e.game.playerList[1].ready?"已准备":"未准备")+" ")])]),e.game.playerList[1].lastSendObj&&e.game.playerList[1].lastSendObj.poker[0].text?i("div",{staticStyle:{position:"fixed",top:"100px",right:"200px",height:"200px"}},e._l(e.game.playerList[1].lastSendObj.poker,(function(t){return i("div",{staticClass:"pokerDesk",class:{s:16===t.number,x:17===t.number}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.number<16,expression:"item.number<16"}]},[e._v(" "+e._s(t.text)+" ")])])})),0):e._e(),e.game.playerList[1].lastSendObj&&!e.game.playerList[1].lastSendObj.poker[0].text?i("div",{staticStyle:{position:"fixed",top:"100px",right:"200px",height:"200px"}},[i("div",{staticStyle:{height:"100%",width:"100px",float:"left","margin-left":"-50px","font-size":"50px",color:"#ff0000"}},[e._v(" pass ")])]):e._e(),"jiaoFen"===e.game.stage&&-1!=e.game.playerList[1].jiaoFen?i("div",{staticStyle:{position:"fixed",top:"100px",right:"200px",height:"200px"}},[i("div",{staticStyle:{height:"100%",width:"100px",float:"left","margin-left":"-50px","font-size":"50px",color:"#ff0000"}},[0!=e.game.playerList[1].jiaoFen?i("span",[e._v(" "+e._s(e.game.playerList[1].jiaoFen)+"分 ")]):e._e(),0==e.game.playerList[1].jiaoFen?i("span",[e._v(" 不叫 ")]):e._e()])]):e._e()])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("audio",{staticStyle:{position:"fixed",left:"0",bottom:"0"},attrs:{muted:"",autoplay:"",loop:"",controls:""}},[i("source",{attrs:{src:r("e791")}}),e._v(" 您的浏览器不支持 audio 元素。 ")])}],l=(r("ea69"),r("053b"),r("77ad"),r("1462")),h=r("a340"),u=(r("2eeb"),r("e18c"),r("1c2e"),function(){function e(t){Object(l["a"])(this,e),t.text?(this.text=t.text,this.number=e.textToNumber(t.text)):(this.number=t.number,this.text=e.numberToText(t.number)),this.type=t.type,this.selected=t.selected}return Object(h["a"])(e,[{key:"toString",value:function(){return this.text}}],[{key:"textToNumber",value:function(e){switch(e){case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case"10":case"0":case"T":case"t":return 10;case"11":case"j":case"J":return 11;case"12":case"q":case"Q":return 12;case"13":case"k":case"K":return 13;case"1":case"a":case"A":return 14;case"2":return 15;case"s":case"S":return 16;case"x":case"X":return 17}}},{key:"numberToText",value:function(e){switch(e){case 3:return"3";case 4:return"4";case 5:return"5";case 6:return"6";case 7:return"7";case 8:return"8";case 9:return"9";case 10:return"10";case 11:return"J";case 12:return"Q";case 13:return"K";case 14:return"A";case 15:return"2";case 16:return"S";case 17:return"X"}}},{key:"sortFunction",value:function(e,t){return e.number-t.number}},{key:"getObjByPokerList",value:function(t){if("pass"===t[0])return{type:"pass",poker:t};t.sort(e.sortFunction);for(var r=t[0],i=[r],n=[],s=1;s<t.length;s++)t[s].number!==r.number?(n.push(i),i=[t[s]]):i.push(t[s]),r=t[s];n.push(i);for(var o=[],a=[],l=[],h=[],u=0;u<n.length;u++)3===n[u].length?l.push(n[u]):2===n[u].length?a.push(n[u]):1===n[u].length?o.push(n[u]):4===n[u].length&&h.push(n[u]);if(1===t.length)return{type:"one",poker:t,one:t};if(2===t.length){if(1===a.length)return{type:"two",poker:t,two:t};if(16===t[0].number&&17===t[1].number)return{type:"sx",poker:t,sx:t}}else if(3===t.length){if(1===l.length)return{type:"three",poker:t,three:t}}else if(4===t.length){if(1===l.length)return{type:"threeWithOne",poker:t,three:l[0],one:o[0]};if(1===h.length)return{type:"four",poker:t,four:t}}else if(5===t.length){if(1===l.length&&1===a.length)return{type:"threeWithTwo",poker:t,three:l[0],two:a[0]}}else if(6===t.length){if(1===h.length&&2===o.length)return{type:"fourWithOne",poker:t,four:h[0]}}else if(8===t.length&&1===h.length&&2===a.length)return{type:"fourWithTwo",poker:t,four:h[0]};if(l.length>=2&&l[l.length-1][0].number<=14&&l[0][0].number+l.length-1===l[l.length-1][0].number){if(t.length-3*l.length===l.length)return{type:"threeWithOneList",poker:t,list:l.map((function(e){return{three:e}}))};if(a.length===l.length)return{type:"threeWithTwoList",poker:t,list:l.map((function(e){return{three:e}}))}}return t.length>=5&&t[t.length-1].number<=14&&o.length===t.length&&t[0].number+t.length-1===t[t.length-1].number?{type:"oneList",poker:t,list:o.map((function(e){return{one:e}}))}:t.length>=6&&t[t.length-1].number<=14&&t.length%2===0&&a.length===t.length/2&&t[0].number+t.length/2-1===t[t.length-1].number?{type:"twoList",poker:t,list:a.map((function(e){return{two:e}}))}:t.length>=6&&t[t.length-1].number<=14&&t.length%3===0&&l.length===t.length/3&&t[0].number+t.length/3-1===t[t.length-1].number&&{type:"threeList",poker:t,list:l.map((function(e){return{three:e}}))}}},{key:"pokerListToString",value:function(e){for(var t="",r=0;r<e.length;r++){var i=e[r].toString();t+=i}return t}}]),e}()),p=u,g=(r("b4fb"),r("2393"),r("0e71"),function(){function e(t){Object(l["a"])(this,e),t=t||{},this.player=t.player,this.game=t.game}return Object(h["a"])(e,[{key:"classify",value:function(e){if(e.sort(this.sortFunction),0===e.length)return{1:[],2:[],3:[],4:[]};for(var t=e[0],r=[t],i=[],n=1;n<e.length;n++)e[n].number!==t.number?(i.push(r),r=[e[n]]):r.push(e[n]),t=e[n];i.push(r);for(var s=[],o=[],a=[],l=[],h=0;h<i.length;h++)3===i[h].length?a.push(i[h]):2===i[h].length?o.push(i[h]):1===i[h].length?s.push(i[h]):4===i[h].length&&l.push(i[h]);return{1:s,2:o,3:a,4:l}}},{key:"getClassifyObj",value:function(e){for(var t=[],r=[],i=[],n=e.slice(0),s=0;s<n.length;s++)if(15===n[s].number){var o=n.splice(s,1);s--,t.push(o[0])}else if(16===n[s].number){var a=n.splice(s,1);s--,r.push(a[0])}else if(17===n[s].number){var l=n.splice(s,1);s--,i.push(l[0])}var h=this.classify(n),u=h[1],p=h[2],g=h[3],f=h[4],y=f,c=[],m=[],k=[],b=[],v=[],d=[];if(g.length>0){for(var L=[g[0]],x=[],w=1;w<g.length;w++)g[w][0].number!==g[w-1][0].number+1?(x.push(L),L=[g[w]]):L.push(g[w]);x.push(L);for(var O=0;O<x.length;O++)x[O].length>1?m.push(x[O]):c.push(x[O][0])}if(p.length>0){for(var j=[p[0]],P=[],S=1;S<p.length;S++)p[S][0].number!==p[S-1][0].number+1?(P.push(j),j=[p[S]]):j.push(p[S]);P.push(j);for(var _=0;_<P.length;_++)P[_].length>2?b.push(P[_]):k=k.concat(P[_])}if(u.length>0){for(var B=[u[0]],F=[],T=1;T<u.length;T++)u[T][0].number!==u[T-1][0].number+1?(F.push(B),B=[u[T]]):B.push(u[T]);F.push(B);for(var z=0;z<F.length;z++)F[z].length>4?d.push(F[z]):v=v.concat(F[z])}if(v.length>0&&k.length>0){var W=0,N=0;while(1){if(W>v.length-1&&N>k.length-1)break;var J=void 0,M=void 0,R=[],A=[];if(0===v.length||W>v.length-1)break;0===k.length||N>k.length-1||v[W][0].number<k[N][0].number?(J=v[W][0].number,R.push(v[W]),W++):(J=k[N][0].number,A.push(k[N]),N++),M=J;do{if(W>v.length-1&&N>k.length-1)break;if(W<v.length&&v[W][0].number===M+1)R.push(v[W]),W++;else{if(!(N<k.length&&k[N][0].number===M+1))break;A.push(k[N]),N++}if(M+=1,M===J+4&&A.length<4){for(var C=[],D=0;D<R.length;D++){C.push(R[D]);for(var I=0;I<v.length;I++)if(v[I]===R[D]){v.splice(I,1);break}}for(var G=0;G<A.length;G++){for(var Z=A[G],$=0;$<k.length;$++)if(k[$]===Z){k.splice($,1);break}var E=Z.splice(0,1);C.push(E),v.push(Z)}C.sort(this.sortArray),d.push(C),v.sort(this.sortArray),W=0,N=0;break}}while(1)}}for(var K=0;K<v.length;K++){for(var Q=!1,X=0;X<d.length;X++){if(v[K][0].number===d[X][0][0].number-1){d[X].unshift(v[K]),Q=!0;break}if(v[K][0].number===d[X][d[X].length-1][0].number+1){d[X].push(v[K]),Q=!0;break}}Q&&(v.splice(K,1),K--)}d.sort(this.sortList);for(var q=1;q<d.length;q++)d[q][0][0].number===d[q-1][d[q-1].length-1][0].number+1&&(d[q-1]=d[q-1].concat(d[q]),d.splice(q,1),q--);return{four:y,three:c,threeList:m,two:k,twoList:b,one:v,oneList:d,poker15:t,poker16:r,poker17:i}}},{key:"getJiaoFen",value:function(){this.player.getClassifyObj();var e=this.player.classifyObj,t=e.poker15.length,r=e.poker16.length,i=e.poker17.length,n=2*t+3*r+4*i;return n<8?0:n<10?1:n<12?2:3}},{key:"getByObj1",value:function(e){var t;return t=this.getSmallestObjByObj(e),t||(t=this.getByBoom(e)),t}},{key:"getByObj2",value:function(e){var t;return t=this.getByObj1(e),t||(t=this.getBySplit(e)),t}},{key:"getByObj3",value:function(e){var t;return t=this.getSmallestObjNoBig(e),t}},{key:"getByObj4",value:function(e){var t;return t="one"===e.type?this.getByObj5(e):this.getByObj2(e),t}},{key:"getByBoom",value:function(e){var t,r,i=this.player.classifyObj;if("sx"===e.type)return null;if(i.four.length>0)if("four"===e.type){for(var n=0;n<i.four.length;n++)if(i.four[n][0].number>e.four[0].number){r=i.four[n];break}}else r=i.four[0];return r||4===i.poker15.length&&(r=i.poker15),r?t={type:"four",poker:r,four:r}:i.poker16.length>0&&i.poker17.length>0&&(t={type:"sx",poker:i.poker16.concat(i.poker17),sx:i.poker16.concat(i.poker17)}),t}},{key:"getByObj5",value:function(e){var t=this.getByBoom(e);return t||this.player.pokerList[this.player.pokerList.length-1].number>e.one[0].number&&(t={type:"one",poker:[this.player.pokerList[this.player.pokerList.length-1]],one:[this.player.pokerList[this.player.pokerList.length-1]]}),t}},{key:"getByObj6",value:function(e){var t;return t="dizhu"===e.player.type?this.getByObj1(e):this.getByObj3(e),t}},{key:"playByObj",value:function(e){var t;if("sx"===e.type)return t={type:"pass",poker:["pass"]},void this.player.deleteFromPokerListAndSendByObj(t);if("dizhu"===this.player.type)t=1===this.player.next.pokerList.length||1===this.player.last.pokerList.length?this.getByObj4(e):this.getByObj1(e);else if(this.player.next.type===this.player.type)t=this.getByObj6(e);else if(1===this.player.next.pokerList.length){if("dizhu"===e.player.type)t=this.getByObj4(e);else if("one"===e.type){var r=this.isPlayerCanNotGetOne(e);r||(t=this.getByObj5(e))}}else t=this.getByObj6(e);t||(t={type:"pass",poker:["pass"]}),this.player.deleteFromPokerListAndSendByObj(t)}},{key:"isPlayerCanNotGetOne",value:function(e){for(var t={3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0},r=this.game.oldPokerList,i=0;i<r.length;i++)for(var n=0;n<r[i].poker.length;n++)t[r[i].poker[n].number]++;for(var s=this.game.deskPokerObj,o=0;o<s.poker.length;o++)t[s.poker[o].number]++;for(var a=this.player.pokerList,l=0;l<a.length;l++)t[a[l].number]++;var h=e.one[0].number;if(16===h){if(1!==t[17])return!1}else if(15===h){if(1!==t[16]||1!==t[17])return!1}else for(var u=h+1;u<=15;u++)if(4!==t[u])return!1;return!0}},{key:"playByTypys1",value:function(){for(var e=["threeWithTwoList","threeWithOneList","threeList","twoList","oneList","threeWithTwo","threeWithOne","three","two","one","four","sx"],t=0;t<e.length;t++){var r=this.getSmallestObjByType(e[t]);if(r){this.player.deleteFromPokerListAndSendByObj(r);break}}}},{key:"playByTypys2",value:function(){for(var e=["threeWithTwoList","threeWithOneList","threeList","twoList","oneList","threeWithTwo","threeWithOne","three","two","four","sx","one"],t=0;t<e.length;t++){var r=this.getSmallestObjByType(e[t],!0);if(r){this.player.deleteFromPokerListAndSendByObj(r);break}}}},{key:"playSmallestOne",value:function(){var e={type:"one",poker:[this.player.pokerList[0]],one:[this.player.pokerList[0]]};this.player.deleteFromPokerListAndSendByObj(e)}},{key:"playByAllType",value:function(){"dizhu"===this.player.type?1===this.player.next.pokerList.length||1===this.player.last.pokerList.length?this.playByTypys2():this.playByTypys1():"nongmin"===this.player.next.type?1===this.player.next.pokerList.length?this.playSmallestOne():this.playByTypys1():1===this.player.next.pokerList.length?this.playByTypys2():this.playByTypys1()}},{key:"getSmallestObjNoBig",value:function(e){var t=this.player.classifyObj,r=e.type,i=null;if("one"===r){var n;if(t.one.length>0)for(var s=0;s<t.one.length;s++)if(t.one[s][0].number>e.one[0].number){n=t.one[s];break}n&&(i={type:r,poker:n,one:n})}else if("two"===r){var o;if(t.two.length>0)for(var a=0;a<t.two.length;a++)if(t.two[a][0].number>e.two[0].number){o=t.two[a];break}o&&(i={type:r,poker:o,two:o})}else if("three"===r){var l;if(t.three.length>0)for(var h=0;h<t.three.length;h++)if(t.three[h][0].number>e.three[0].number){t.three[h][0].number<=13&&(l=t.three[h]);break}l&&(i={type:r,poker:l,three:l})}else if("threeWithOne"===r){var u,p;if(t.three.length>0&&t.three.length>0)for(var g=0;g<t.three.length;g++)if(t.three[g][0].number>e.three[0].number){t.three[g][0].number<=13&&(u=t.three[g]);break}t.one.length>0&&(p=t.one[0]),u&&p&&(i={type:r,poker:u.concat(p),three:u,one:p})}else if("threeWithTwo"===r){var f,y;if(t.three.length>0&&t.three.length>0)for(var c=0;c<t.three.length;c++)if(t.three[c][0].number>e.three[0].number){t.three[c][0].number<=13&&(f=t.three[c]);break}t.two.length>0&&(y=t.two[0]),f&&y&&(i={type:r,poker:f.concat(y),three:f,two:y})}return i}},{key:"getSmallestObjByObj",value:function(e){var t=this.player.classifyObj,r=e.type,i=null;if("one"===r){var n;if(t.one.length>0)for(var s=0;s<t.one.length;s++)if(t.one[s][0].number>e.one[0].number){n=t.one[s];break}n||(e.one[0].number<15&&t.poker15.length>0?n=t.poker15.slice(0,1):e.one[0].number<16&&t.poker16.length>0?n=t.poker16:e.one[0].number<17&&t.poker17.length>0&&(n=t.poker17)),n&&(i={type:r,poker:n,one:n})}else if("two"===r){var o;if(t.two.length>0)for(var a=0;a<t.two.length;a++)if(t.two[a][0].number>e.two[0].number){o=t.two[a];break}o||e.two[0].number<15&&t.poker15.length>1&&(o=t.poker15.slice(0,2)),o&&(i={type:r,poker:o,two:o})}else if("three"===r){var l;if(t.three.length>0)for(var h=0;h<t.three.length;h++)if(t.three[h][0].number>e.three[0].number){l=t.three[h];break}l||e.three[0].number<15&&3===t.poker15.length&&(l=t.poker15),l&&(i={type:r,poker:l,three:l})}else if("threeWithOne"===r){var u,p;if(t.three.length>0&&t.three.length>0)for(var g=0;g<t.three.length;g++)if(t.three[g][0].number>e.three[0].number){u=t.three[g];break}u||e.three[0].number<15&&3===t.poker15.length&&(u=t.poker15),t.one.length>0&&(p=t.one[0]),!p&&t.poker15.length>0&&(p=t.poker15.slice(0,1)),u&&p&&(i={type:r,poker:u.concat(p),three:u,one:p})}else if("threeWithTwo"===r){var f,y;if(t.three.length>0&&t.three.length>0)for(var c=0;c<t.three.length;c++)if(t.three[c][0].number>e.three[0].number){f=t.three[c];break}f||e.three[0].number<15&&3===t.poker15.length&&(f=t.poker15),t.two.length>0&&(y=t.two[0]),!y&&t.poker15.length>1&&(y=t.poker15.slice(0,2)),f&&y&&(i={type:r,poker:f.concat(y),three:f,two:y})}else if("four"===r){var m;if(t.four.length>0)for(var k=0;k<t.four.length;k++)if(t.four[k][0].number>e.four[0].number){m=t.four[k];break}m||4===t.poker15.length&&(m=t.poker15),m&&(i={type:r,poker:m,four:m})}else if("fourWithOne"===r){var b,v,d;if(t.four.length>0)for(var L=0;L<t.four.length;L++)if(t.four[L][0].number>e.four[0].number){b=t.four[L];break}t.one.length>1&&(v=t.one[0],d=t.one[1]),b&&v&&d&&(i={type:r,poker:b.concat(v).concat(d),four:b})}else if("fourWithTwo"===r){var x,w,O;if(t.four.length>0)for(var j=0;j<t.four.length;j++)if(t.four[j][0].number>e.four[0].number){x=t.four[j];break}t.two.length>1&&(w=t.two[0],O=t.two[1]),x&&w&&O&&(i={type:r,poker:x.concat(w).concat(O),four:x})}else if("threeWithOneList"===r){if(t.threeList.length>0)for(var P=0;P<t.threeList.length;P++)if(t.threeList[P].length===e.list.length&&t.threeList[P][0][0].number>e.list[0].three[0].number){if(t.one.length>=t.threeList[P].length){var S=t.threeList[P].flat(1),_=t.one.slice(0,t.threeList[P].length).flat(1);i={type:r,poker:S.concat(_),list:t.threeList[P].map((function(e){return{three:e}}))}}break}}else if("threeWithTwoList"===r){if(t.threeList.length>0)for(var B=0;B<t.threeList.length;B++)if(t.threeList[B].length===e.list.length&&t.threeList[B][0][0].number>e.list[0].three[0].number){if(t.two.length>=t.threeList[B].length){var F=t.threeList[B].flat(1),T=t.two.slice(0,t.threeList[B].length).flat(1);i={type:r,poker:F.concat(T),list:t.threeList[B].map((function(e){return{three:e}}))}}break}}else if("oneList"===r){if(t.oneList.length>0)for(var z=0;z<t.oneList.length;z++)if(t.oneList[z].length===e.list.length&&t.oneList[z][0][0].number>e.list[0].one[0].number){i={type:r,poker:t.oneList[z].flat(1),list:t.oneList[z].map((function(e){return{one:e}}))};break}}else if("twoList"===r){if(t.twoList.length>0)for(var W=0;W<t.twoList.length;W++)if(t.twoList[W].length===e.list.length&&t.twoList[W][0][0].number>e.list[0].two[0].number){i={type:r,poker:t.twoList[W].flat(1),list:t.twoList[W].map((function(e){return{two:e}}))};break}}else if("threeList"===r){if(t.threeList.length>0)for(var N=0;N<t.threeList.length;N++)if(t.threeList[N].length===e.list.length&&t.threeList[N][0][0].number>e.list[0].three[0].number){i={type:r,poker:t.threeList[N].flat(1),list:t.threeList[N].map((function(e){return{three:e}}))};break}}else if("sx"===r&&t.poker16.length>0&&t.poker17.length>0)return{type:r,poker:t.poker16.concat(t.poker17),sx:t.poker16.concat(t.poker17)};return i}},{key:"getSmallestObjByType",value:function(e,t){var r,i,n=this.player.classifyObj,s=null;if("one"===e)t?(r=n.poker17.length>0?n.poker17:n.poker16.length>0?n.poker16:n.poker15.length>0?n.poker15.slice(0,1):n.one[n.one.length-1],s={type:e,poker:r,one:r}):(n.one.length>0?i=n.one[0]:n.poker15.length>0&&n.poker15.length<4?i=n.poker15.slice(0,1):0!==n.poker17.length&&0!==n.poker16.length||(n.poker16.length>0?i=n.poker16:n.poker17.length>0&&(i=n.poker17)),i&&(s={type:e,poker:i,one:i}));else if("two"===e){var o;t?n.two.length>0?o=n.two[0]:2===n.poker15.length&&(o=n.poker15):n.two.length>0&&(o=n.two[0]),o&&(s={type:e,poker:o,two:o})}else if("three"===e){var a;t?n.three.length>0?a=n.three[0]:3===n.poker15.length&&(a=n.poker15):n.three.length>0&&(a=n.three[0]),a&&(s={type:e,poker:a,three:a})}else if("threeWithOne"===e){var l,h;n.three.length>0&&(l=n.three[0]),n.one.length>0&&(h=n.one[0]),t&&(l||3!==n.poker15.length||(l=n.poker15),h||1!==n.poker15.length||(h=n.poker15)),l&&h&&(s={type:e,poker:l.concat(h),three:l,one:h})}else if("four"===e){var u;t?n.four.length>0?u=n.four[0]:4===n.poker15.length&&(u=n.poker15):n.four.length>0&&(u=n.four[0]),u&&(s={type:e,poker:u,four:u})}else if("threeWithTwo"===e){var p,g;n.three.length>0&&(p=n.three[0]),n.two.length>0&&(g=n.two[0]),t&&(p||3!==n.poker15.length||(p=n.poker15),g||2!==n.poker15.length||(g=n.poker15)),p&&g&&(s={type:e,poker:p.concat(g),three:p,two:g})}else if("threeWithOneList"===e){if(n.threeList.length>0&&n.one.length>=n.threeList[0].length){var f=n.threeList[0].flat(1),y=n.one.slice(0,n.threeList[0].length).flat(1);s={type:e,poker:f.concat(y),list:n.threeList[0].map((function(e){return{three:e}}))}}}else if("threeWithTwoList"===e){if(n.threeList.length>0&&n.two.length>=n.threeList[0].length){var c=n.threeList[0].flat(1),m=n.two.slice(0,n.threeList[0].length).flat(1);s={type:e,poker:c.concat(m),list:n.threeList[0].map((function(e){return{three:e}}))}}}else if("oneList"===e)n.oneList.length>0&&(s={type:e,poker:n.oneList[0].flat(1),list:n.oneList[0].map((function(e){return{one:e}}))});else if("twoList"===e)n.twoList.length>0&&(s={type:e,poker:n.twoList[0].flat(1),list:n.twoList[0].map((function(e){return{two:e}}))});else if("threeList"===e)n.threeList.length>0&&(s={type:e,poker:n.threeList[0].flat(1),list:n.threeList[0].map((function(e){return{three:e}}))});else if("sx"===e&&n.poker16.length>0&&n.poker17.length>0)return{type:e,poker:n.poker16.concat(n.poker17),sx:n.poker16.concat(n.poker17)};return s}},{key:"getBySplit",value:function(e){for(var t=this.player.pokerList,r=t[0],i=[r],n=[],s=1;s<t.length;s++)t[s].number!==r.number?(n.push(i),i=[t[s]]):i.push(t[s]),r=t[s];n.push(i);for(var o=[],a=[],l=[],h=[],u=0;u<n.length;u++)3===n[u].length?l.push(n[u]):2===n[u].length?a.push(n[u]):1===n[u].length?o.push(n[u]):4===n[u].length&&h.push(n[u]);var p=e.type,g=null;if("two"===p){if(a.length>0){for(var f=0;f<a.length;f++)if(a[f][0].number>e.two[0].number){g={type:p,poker:a[f],two:a[f]};break}}else if(l.length>0)for(var y=0;y<l.length;y++)if(l[y][0].number>e.two[0].number){var c=l[y].slice(0,2);g={type:p,poker:c,two:c};break}}else if("threeWithOne"===p){if(l.length>0)for(var m=0;m<l.length;m++)if(l[m][0].number>e.three[0].number){var k=void 0;if(o.length>0)k=o[0];else if(a.length>0)k=a[0].slice(0,1);else if(l.length>0)for(var b=0;b<l.length;b++)b!==m&&(k=l[b].slice(0,1));k&&(g={type:p,poker:l[m].concat(k),three:l[m],one:k});break}}else if("threeWithTwo"===p){if(l.length>0)for(var v=0;v<l.length;v++)if(l[v][0].number>e.three[0].number){var d=void 0;if(a.length>0)d=a[0];else if(l.length>0)for(var L=0;L<l.length;L++)L!==v&&(d=l[L].slice(0,2));d&&(g={type:p,poker:l[v].concat(d),three:l[v],two:d});break}}else if("threeWithOneList"===p){if(l.length>=e.list.length)for(var x=0;x<l.length-e.list.length+1;x++)if(l[x][0].number>e.list[0].three[0].number&&l[x][0].number+e.list.length-1===l[x+e.list.length-1][0].number&&l[x+e.list.length-1][0].number<=14){for(var w=[],O=0;O<o.length&&w.length<e.list.length;O++)w.push(o[O]);for(var j=0;j<a.length&&w.length<e.list.length;j++)w.push(a[j].slice(0,1)),w.length<e.list.length&&w.push(a[j].slice(1,2));for(var P=0;P<l.length&&w.length<e.list.length;P++)P>=x&&P<=x+e.list.length-1||(w.push(l[P].slice(0,1)),w.length<e.list.length&&w.push(l[P].slice(1,2)),w.length<e.list.length&&w.push(l[P].slice(2,3)));if(w.length===e.list.length){for(var S=[],_=[],B=0;B<e.list.length;B++){S=S.concat(l[x+B]),S=S.concat(w[x]);var F={three:l[x+B],one:w[x]};_.push(F)}g={type:p,poker:S,list:_}}break}}else if("threeWithTwoList"===p){if(l.length>=e.list.length)for(var T=0;T<l.length-e.list.length+1;T++)if(l[T][0].number>e.list[0].three[0].number&&l[T][0].number+e.list.length-1===l[T+e.list.length-1][0].number&&l[T+e.list.length-1][0].number<=14){for(var z=[],W=0;W<a.length&&z.length<e.list.length;W++)z.push(a);for(var N=0;N<l.length&&z.length<e.list.length;N++)N>=T&&N<=T+e.list.length-1||z.push(l[N].slice(0,2));if(z.length===e.list.length){for(var J=[],M=[],R=0;R<e.list.length;R++){J=J.concat(l[T+R]),J=J.concat(z[T]);var A={three:l[T+R],two:z[T]};M.push(A)}g={type:p,poker:J,list:M}}break}}else if("oneList"===p){if(o.length>=e.list.length)for(var C=0;C<o.length-e.list.length+1;C++)if(o[C][0].number>e.list[0].one[0].number&&o[C][0].number+e.list.length-1===o[C+e.list.length-1][0].number&&o[C+e.list.length-1][0].number<=14){var D=o.slice(C,C+e.list.length);g={type:p,poker:D.flat(1),list:D.map((function(e){return{one:e}}))};break}}else if("twoList"===p){if(a.length>=e.list.length)for(var I=0;I<a.length-e.list.length+1;I++)if(a[I][0].number>e.list[0].two[0].number&&a[I][0].number+e.list.length-1===a[I+e.list.length-1][0].number&&a[I+e.list.length-1][0].number<=14){var G=a.slice(I,I+e.list.length);g={type:p,poker:G.flat(1),list:G.map((function(e){return{two:e}}))};break}}else if("threeList"===p&&l.length>=e.list.length)for(var Z=0;Z<l.length-e.list.length+1;Z++)if(l[Z][0].number>e.list[0].two[0].number&&l[Z][0].number+e.list.length-1===l[Z+e.list.length-1][0].number&&l[Z+e.list.length-1][0].number<=14){var $=l.slice(Z,Z+e.list.length);g={type:p,poker:$.flat(1),list:$.map((function(e){return{three:e}}))};break}return g}},{key:"sortFunction",value:function(e,t){return e.number-t.number}},{key:"sortArray",value:function(e,t){return e[0].number-t[0].number}},{key:"sortList",value:function(e,t){return e[0][0].number-t[0][0].number}}]),e}()),f=g,y=function(){function e(t){Object(l["a"])(this,e),t=t||{},this.ready=!1,this.jiaoFen=-1,this.pokerList=[],this.name=t.name||"noName"+Math.random(),this.type=t.type||"nongmin",this.last=null,this.next=null,this.isRobot=t.isRobot,this.game=t.game,this.ai=new f({player:this,game:t.game}),this.classifyObj=null,this.lastSendObj=null,this.isRobot&&this.loopRobot()}return Object(h["a"])(e,[{key:"setJiaoFen",value:function(e){this.jiaoFen=e,this.game.someOneJiaoFen()}},{key:"loopRobot",value:function(){var e=this;if(e.isRobot&&(e.ready||e.setReady()),"jiaoFen"===e.game.stage&&e.game.currentJiaoFenPlayer===e){var t=e.ai.getJiaoFen();e.setJiaoFen(t)}setTimeout((function(){e.loopRobot()}),2e3)}},{key:"setReady",value:function(){this.ready=!0,this.game.setReady()}},{key:"reset",value:function(){this.ready=!1,this.jiaoFen=-1,this.pokerList=[],this.type="nongmin",this.classifyObj=null,this.lastSendObj=null}},{key:"getClassifyObj",value:function(){this.classifyObj=this.ai.getClassifyObj(this.pokerList)}},{key:"addPoker",value:function(e){this.pokerList.push(e)}},{key:"sortPoker",value:function(){this.pokerList.sort(this.sortFunction)}},{key:"sortFunction",value:function(e,t){return e.number-t.number}},{key:"getLastObj",value:function(){var e=this.last.lastSendObj;return!!(e&&"pass"!==e.type||(e=this.next.lastSendObj,e&&"pass"!==e.type))&&e}},{key:"playByAI",value:function(){var e=this;e.getClassifyObj(),setTimeout((function(){var t=e.getLastObj();t?e.ai.playByObj(t):e.ai.playByAllType()}),1e3)}},{key:"sendPoker",value:function(e){e.player=this,this.game.clearDesk(),this.lastSendObj=e,this.game.deskPokerObj=e,this.game.next()}},{key:"deleteFromPokerListAndSendByObj",value:function(e){var t=[];if("pass"===e.type)return this.sendPoker(e),!0;for(var r=e.poker,i=0;i<r.length;i++){var n=this.getAndDeleteOnePokerByNumber(r[i].number);if(!n)return this.listBackToPokerList(t),!1;t.push(n)}return this.sendPoker(e),!0}},{key:"getListByList",value:function(e){var t=[];if("pass"===e[0])return["pass"];for(var r=0;r<e.length;r++){var i=e[r],n=this.getAndDeleteOnePokerByNumber(i.number);if(!n)return this.listBackToPokerList(t),!1;t.push(n)}return t}},{key:"getListByString",value:function(e){var t=[];if("pass"===e)return["pass"];for(var r=0;r<e.length;r++){var i=e[r],n=p.textToNumber(i),s=this.getAndDeleteOnePokerByNumber(n);if(!s)return this.listBackToPokerList(t),!1;t.push(s)}return t}},{key:"listBackToPokerList",value:function(e){while(e.length>0){var t=e.splice(0,1)[0];this.pokerList.push(t)}this.sortPoker()}},{key:"handleList",value:function(e){if(e){var t=p.getObjByPokerList(e);if(t){if("pass"===t.type)return this.sendPoker(t),!0;var r=this.getLastObj();if(r){if(r.type===t.type){var i=this.compareTwoObj(t,r);return i?(this.sendPoker(t),!0):(this.listBackToPokerList(e),alert("必须大于 "+p.pokerListToString(r.poker)),!1)}return"sx"===t.type||"four"===t.type&&"sx"!==r.type?(this.sendPoker(t),!0):(this.listBackToPokerList(e),alert("牌型不是 "+r.type+"!"),!1)}return this.sendPoker(t),!0}return this.listBackToPokerList(e),alert("牌型错误!"),!1}return alert("你没有此牌!"),!1}},{key:"playByPokerList",value:function(e){if(this.game.currentPlayer!==this)return alert("请等待 "+this.game.currentPlayer.name+" 出牌"),!1;var t=this.getListByList(e);return this.handleList(t)}},{key:"playByString",value:function(e){if(this.game.currentPlayer!==this)return alert("请等待 "+this.game.currentPlayer.name+" 出牌"),!1;var t=this.getListByString(e);return this.handleList(t)}},{key:"compareTwoObj",value:function(e,t){return(!e.list||!t.list||e.list.length===t.list.length)&&("one"===e.type?e.one[0].number>t.one[0].number:"two"===e.type?e.two[0].number>t.two[0].number:"three"===e.type||"threeWithOne"===e.type||"threeWithTwo"===e.type?e.three[0].number>t.three[0].number:"fourWithOne"===e.type||"fourWithTwo"===e.type?e.four[0].number>t.four[0].number:"threeWithOneList"===e.type||"threeWithTwoList"===e.type?e.list[0].three[0].number>t.list[0].three[0].number:"oneList"===e.type?e.list[0].one[0].number>t.list[0].one[0].number:"twoList"===e.type?e.list[0].two[0].number>t.list[0].two[0].number:"threeList"===e.type?e.list[0].three[0].number>t.list[0].three[0].number:"four"===e.type?e.four[0].number>t.four[0].number:void 0)}},{key:"getAndDeleteOnePokerByNumber",value:function(e){for(var t=0;t<this.pokerList.length;t++)if(this.pokerList[t].number===e)return this.pokerList.splice(t,1)[0];return!1}},{key:"pokerListToString",value:function(){var e=p.pokerListToString(this.pokerList);return e}},{key:"lastSendObjToString",value:function(){if(!this.lastSendObj)return"";var e=p.pokerListToString(this.lastSendObj.poker);return e}}]),e}(),c=y,m=function(){function e(){Object(l["a"])(this,e),this.playerList=[],this.pokerList=[],this.dizhuPokerList=[],this.deskPokerObj=null,this.oldPokerList=[],this.currentPlayer=null,this.currentJiaoFenPlayer=null,this.jiaoFenCount=0,this.dizhu=null,this.MaxSecond=60,this.second=this.MaxSecond,this.stage="ready",this.init()}return Object(h["a"])(e,[{key:"init",value:function(){this.initPokerList(),this.initPlayerList()}},{key:"setReady",value:function(){this.playerList[0]&&this.playerList[0].ready&&this.playerList[1]&&this.playerList[1].ready&&this.playerList[2]&&this.playerList[2].ready&&(this.sendPoker(),this.startJiaoFen())}},{key:"startJiaoFen",value:function(){this.stage="jiaoFen";var e=this.getRandomIntInclusive(0,2);this.currentJiaoFenPlayer=this.playerList[e]}},{key:"someOneJiaoFen",value:function(){var e=this;this.jiaoFenCount++,3!==this.jiaoFenCount?this.currentJiaoFenPlayer=this.currentJiaoFenPlayer.next:setTimeout((function(){e.setDiZhu()}),1e3)}},{key:"setDiZhu",value:function(){var e=this.playerList.slice(0).sort(this.sortByJiaoFen),t=e[0];t.type="dizhu",this.dizhu=t,this.sendDiZhuPoker(),this.start()}},{key:"sortByJiaoFen",value:function(e,t){return t.jiaoFen-e.jiaoFen}},{key:"resetTime",value:function(){this.second=this.MaxSecond}},{key:"timeLoop",value:function(){if("play"===this.stage){this.second--,0===this.second&&this.timeout();var e=this;setTimeout((function(){e.timeLoop()}),1e3)}}},{key:"timeout",value:function(){this.currentPlayer.playByString("pass")}},{key:"start",value:function(){this.stage="play",this.timeLoop(),this.currentPlayer=this.dizhu,this.currentPlayer.isRobot&&this.currentPlayer.playByAI()}},{key:"reset",value:function(){this.playerList[0].reset(),this.playerList[1].reset(),this.playerList[2].reset(),this.pokerList=[],this.dizhuPokerList=[],this.deskPokerObj=null,this.oldPokerList=[],this.currentPlayer=null,this.currentJiaoFenPlayer=null,this.jiaoFenCount=0,this.dizhu=null,this.second=this.MaxSecond,this.stage="ready",this.initPokerList()}},{key:"next",value:function(){var e=this.checkGameOver();e?this.gameOver():(this.resetTime(),this.currentPlayer=this.currentPlayer.next,this.currentPlayer.isRobot&&this.currentPlayer.playByAI())}},{key:"gameOver",value:function(){alert("游戏结束! "+this.currentPlayer.name+" ["+this.currentPlayer.type+"] 胜!"),this.reset()}},{key:"checkGameOver",value:function(){if(0===this.currentPlayer.pokerList.length)return!0}},{key:"clearDesk",value:function(){this.deskPokerObj&&(this.oldPokerList.push(this.deskPokerObj),this.deskPokerObj=null)}},{key:"sendDiZhuPoker",value:function(){do{var e=this.pokerList.splice(0,1)[0];this.dizhu.addPoker(e)}while(this.pokerList.length>0);this.dizhu.sortPoker()}},{key:"sendPoker",value:function(){var e=this.playerList[0];do{var t=this.getRandomIntInclusive(0,this.pokerList.length-1),r=this.pokerList.splice(t,1)[0];e.addPoker(r),e=e.next}while(this.pokerList.length>3);for(var i=0;i<this.playerList.length;i++)this.playerList[i].sortPoker();this.dizhuPokerList=this.pokerList.slice(0)}},{key:"initPlayerList",value:function(){this.playerList=[];var e=new c({name:"player",isRobot:!1,game:this}),t=new c({name:"机器人1",isRobot:!0,game:this}),r=new c({name:"机器人2",isRobot:!0,game:this});this.playerList=[e,t,r],this.playerList[0].next=this.playerList[1],this.playerList[1].next=this.playerList[2],this.playerList[2].next=this.playerList[0],this.playerList[0].last=this.playerList[2],this.playerList[1].last=this.playerList[0],this.playerList[2].last=this.playerList[1]}},{key:"initPokerList",value:function(){this.pokerList=[];for(var e=3;e<=15;e++)for(var t=0;t<4;t++){var r=new p({number:e,type:t});this.pokerList.push(r)}for(var i=16;i<=17;i++){var n=new p({number:i});this.pokerList.push(n)}}},{key:"getRandomIntInclusive",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}]),e}(),k=m,b={name:"HelloWorld",data:function(){return{data:"fuck1",game:new k,playerStr:"",pokerList:[]}},computed:{playerMarginLeft:function(){return(window.innerWidth-50*this.game.playerList[0].pokerList.length)/2},deskPokerMarginLeft:function(){return(window.innerWidth-50*this.game.playerList[0].lastSendObj.poker.length)/2},buttonMarginLeft:function(){return(window.innerWidth-400)/2},playerJiaoFenMargin:function(){return window.innerWidth/2-30},dizhuPokerMarginLeft:function(){return(window.innerWidth-50*this.game.dizhuPokerList.length)/2}},mounted:function(){this.data=this.game.playerList[1].name,window.game=this.game},methods:{setReady:function(){var e=this;e.game.playerList[0].setReady()},enter:function(e,t){1===e.buttons&&this.pickPoker(t)},pickPoker:function(e){if(e.selected){e.selected=!1;for(var t=0;t<this.pokerList.length;t++)this.pokerList[t]===e&&this.pokerList.splice(t,1)}else e.selected=!0,this.pokerList.push(e)},sendPoker2:function(){var e=this.game,t=e.playerList[0].playByPokerList(this.pokerList);t&&(this.pokerList=[])},pass:function(){this.game.playerList[0].playByString("pass")}}},v=b,d=(r("4cee"),r("9ca4")),L=Object(d["a"])(v,o,a,!1,null,"87d8fb88",null),x=L.exports,w={name:"App",components:{Game:x}},O=w,j=Object(d["a"])(O,n,s,!1,null,null,null),P=j.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(P)}}).$mount("#app")},9384:function(e,t,r){},e791:function(e,t,r){e.exports=r.p+"media/bgm.8035c6a0.mp3"}});
//# sourceMappingURL=app.32848eb0.js.map